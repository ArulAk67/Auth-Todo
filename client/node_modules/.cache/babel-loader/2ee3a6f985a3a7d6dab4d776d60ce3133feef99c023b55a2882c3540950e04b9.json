{"ast":null,"code":"import _objectSpread from\"A:/MERN/Auth + todo/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"A:/MERN/Auth + todo/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"A:/MERN/Auth + todo/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"A:/MERN/Auth + todo/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{Link,useNavigate}from'react-router-dom';import avatar from\"../assets/profile.png\";import styles from'../styles/Username.module.css';import toast,{Toaster}from'react-hot-toast';import{useFormik}from'formik';import{passwordValidate}from'../helper/validate';import useFetch from'../hooks/fetch.hook';import{useAuthStore}from'../store/store';import{verifyPassword}from'../helper/helper';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Password(){var navigate=useNavigate();var _useAuthStore=useAuthStore(function(state){return state.auth;}),username=_useAuthStore.username;var _useFetch=useFetch(username),_useFetch2=_slicedToArray(_useFetch,1),_useFetch2$=_useFetch2[0],isLoading=_useFetch2$.isLoading,apiData=_useFetch2$.apiData,serverError=_useFetch2$.serverError;console.log(apiData);var formik=useFormik({initialValues:{password:\"\"},validate:passwordValidate,validateOnBlur:false,validateOnChange:false,// onSubmit : async values =>{\n//   console.log(values)\n//   let loginPromise=verifyPassword({username,password:values.password})\n//   toast.promise(loginPromise, {\n//     loading: 'Checking...',\n//     success : <b>Login Successfully...!</b>,\n//     error : <b>Password Not Match!</b>\n//   });\n//   loginPromise.then(res => {\n//     let { token } = res.data;\n//     localStorage.setItem('token', token);\n//     navigate('/profile')\n//   })\n// }\nonSubmit:function(){var _onSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(values){var res,_res$data,token,id;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:console.log(values);_context.prev=1;_context.next=4;return verifyPassword({username:username,password:values.password});case 4:res=_context.sent;_res$data=res.data,token=_res$data.token,id=_res$data.id;localStorage.setItem('userId',id);localStorage.setItem('token',token);toast.success(/*#__PURE__*/_jsx(\"b\",{children:\"Login Successfully...!\"}));navigate('/profile');_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](1);toast.error(/*#__PURE__*/_jsx(\"b\",{children:\"Password Not Match!\"}));case 15:case\"end\":return _context.stop();}},_callee,null,[[1,12]]);}));function onSubmit(_x){return _onSubmit.apply(this,arguments);}return onSubmit;}()});if(isLoading)return/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"isLoading\"});if(serverError)return/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl text-red-500\",children:serverError.message});return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto\",children:[/*#__PURE__*/_jsx(Toaster,{position:\"top-center\",reverseOrder:false}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen\",children:/*#__PURE__*/_jsxs(\"div\",{className:styles.glass,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"title flex flex-col items-center\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-5xl font-bold\",children:[\"Welcome \",(apiData===null||apiData===void 0?void 0:apiData.firstName)||(apiData===null||apiData===void 0?void 0:apiData.username)]}),/*#__PURE__*/_jsx(\"span\",{className:\"py-4 text-xl w-2/3 text-center text-gray-500\",children:\"website without visitors is like a ship lost in the horizon.             \"})]}),/*#__PURE__*/_jsxs(\"form\",{className:\"py-1\",onSubmit:formik.handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile flex justify-center py-4\",children:/*#__PURE__*/_jsx(\"img\",{src:(apiData===null||apiData===void 0?void 0:apiData.profile)||avatar,alt:\"img\",className:styles.profile_img})}),/*#__PURE__*/_jsxs(\"div\",{className:\"textbox flex flex-col items-center gap-6\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},formik.getFieldProps(\"password\")),{},{className:styles.textbox,type:\"text\",placeholder:\"Password\"})),/*#__PURE__*/_jsx(\"button\",{className:styles.btn,type:\"submit\",children:\"Sign In\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-4\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500\",children:[\"Forgot password? \",/*#__PURE__*/_jsx(Link,{className:\"text-red-500\",to:\"/recovery\",children:\"Recovery now\"})]})})]})]})})]});}export default Password;","map":{"version":3,"names":["React","Link","useNavigate","avatar","styles","toast","Toaster","useFormik","passwordValidate","useFetch","useAuthStore","verifyPassword","jsx","_jsx","jsxs","_jsxs","Password","navigate","_useAuthStore","state","auth","username","_useFetch","_useFetch2","_slicedToArray","_useFetch2$","isLoading","apiData","serverError","console","log","formik","initialValues","password","validate","validateOnBlur","validateOnChange","onSubmit","_onSubmit","_asyncToGenerator","_regeneratorRuntime","mark","_callee","values","res","_res$data","token","id","wrap","_callee$","_context","prev","next","sent","data","localStorage","setItem","success","children","t0","error","stop","_x","apply","arguments","className","message","position","reverseOrder","glass","firstName","handleSubmit","src","profile","alt","profile_img","_objectSpread","getFieldProps","textbox","type","placeholder","btn","to"],"sources":["A:/MERN/Auth + todo/client/src/components/Password.js"],"sourcesContent":["import React from 'react'\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport avatar from \"../assets/profile.png\"\r\nimport styles from '../styles/Username.module.css';\r\nimport toast, {Toaster} from 'react-hot-toast';\r\nimport {useFormik} from 'formik';\r\nimport { passwordValidate} from '../helper/validate';\r\nimport useFetch from '../hooks/fetch.hook';\r\nimport { useAuthStore } from '../store/store';\r\nimport { verifyPassword } from '../helper/helper';\r\n\r\n\r\nfunction Password() {\r\n\r\n  const navigate = useNavigate()\r\n  const { username } = useAuthStore(state => state.auth)\r\n\r\n  const [{ isLoading, apiData, serverError }] = useFetch(username)\r\n  \r\n  console.log(apiData);\r\n  const formik =useFormik({\r\n    initialValues:{\r\n      password:\"\"\r\n    },\r\n    validate: passwordValidate,\r\n    validateOnBlur:false,\r\n    validateOnChange:false,\r\n    // onSubmit : async values =>{\r\n    //   console.log(values)\r\n\r\n    //   let loginPromise=verifyPassword({username,password:values.password})\r\n    //   toast.promise(loginPromise, {\r\n    //     loading: 'Checking...',\r\n    //     success : <b>Login Successfully...!</b>,\r\n    //     error : <b>Password Not Match!</b>\r\n    //   });\r\n\r\n    //   loginPromise.then(res => {\r\n    //     let { token } = res.data;\r\n    //     localStorage.setItem('token', token);\r\n    //     navigate('/profile')\r\n    //   })\r\n    // }\r\n    onSubmit: async values => {\r\n      console.log(values);\r\n    \r\n      try {\r\n        const res = await verifyPassword({ username, password: values.password });\r\n        let { token,id} = res.data;\r\n        localStorage.setItem('userId', id);\r\n        localStorage.setItem('token', token);\r\n        toast.success(<b>Login Successfully...!</b>);\r\n        navigate('/profile');\r\n      } catch (error) {\r\n        toast.error(<b>Password Not Match!</b>);\r\n      }\r\n    }\r\n    \r\n  })\r\n\r\n  if(isLoading) return <h1 className='text-2xl font-bold'>isLoading</h1>;\r\n  if(serverError) return <h1 className='text-xl text-red-500'>{serverError.message}</h1>\r\n\r\n  return (\r\n    <div className='container mx-auto'>\r\n      \r\n      <Toaster position='top-center' reverseOrder={false}></Toaster>\r\n\r\n      <div className='flex justify-center items-center h-screen'>\r\n        <div className={styles.glass}>\r\n          <div className='title flex flex-col items-center'>\r\n             <h4 className='text-5xl font-bold'>Welcome {apiData?.firstName || apiData?.username}</h4>\r\n             <span className='py-4 text-xl w-2/3 text-center text-gray-500'>\r\n              website without visitors is like a ship lost in the horizon.             </span>\r\n          </div>\r\n          <form className='py-1' onSubmit={formik.handleSubmit}>\r\n            <div className='profile flex justify-center py-4'>\r\n              <img src={apiData?.profile||avatar} alt='img' className={styles.profile_img}/>\r\n            </div>\r\n            <div className='textbox flex flex-col items-center gap-6'>\r\n              <input {...formik.getFieldProps(\"password\")} className={styles.textbox} type='text' placeholder='Password'/>\r\n              <button className={styles.btn} type='submit'>Sign In</button>\r\n            </div>\r\n            <div className='text-center py-4'>\r\n             <span className='text-gray-500'>Forgot password? <Link className='text-red-500' to=\"/recovery\">Recovery now</Link></span> \r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Password;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}